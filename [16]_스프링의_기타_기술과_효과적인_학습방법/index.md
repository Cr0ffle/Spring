# Chapter 16. μ¤ν”„λ§μ κΈ°νƒ€ κΈ°μ κ³Ό ν¨κ³Όμ μΈ ν•™μµ λ°©λ²•

## 1. μ¤ν”„λ§ κΈ°μ κ³Ό API λ¥Ό ν¨κ³Όμ μΌλ΅ ν•™μµν•λ” λ°©λ²•

- μ¤ν”„λ§μ€ μΌκ΄€λ λ°©μ‹μΌλ΅ κ°λ°λ ν”„λ μ„μ›ν¬λ‹¤. λ¨λ“  μ½”λ“μ™€ API κ°€ λ™μΌν• μ›λ¦¬μ— κΈ°λ°μ„ λ‘κ³  λ§λ“¤μ–΄μ Έ μλ‹¤. λ°”λ΅ DI λ‹¤.

### 1-1. λΉμΌλ΅ λ“±λ΅λλ” μ¤ν”„λ§ ν΄λμ¤μ™€ DI

---

- μ–΄λ–¤ μ¤λΈμ νΈκ°€ λΉμΌλ΅ μ‚¬μ©λλ‹¤μ μλ―Έ
    1. λ‹¤λ¥Έ λΉμ— μν•΄ DI λΌμ„ μ‚¬μ©λλ” μ„λΉ„μ¤λ‹¤.
    2. λ‹¤λ¥Έ λΉμ΄λ‚ μ •λ³΄μ— μμ΅΄ν•κ³  μλ‹¤.

π‘‰Β κ°€μ¥ μΆ‹μ€ μ¤ν”„λ§ ν•™μµ λ°©λ²•: μ¤ν”„λ§μ κΈ°λ¥μ„ νμ•…ν•κ³  μ‚¬μ©ν•λ ¤λ©΄ μ΄ 2κ°€μ§€ κ΄€μ μΌλ΅ μ¤ν”„λ§μ΄ μ κ³µν•λ” λΉ ν΄λμ¤λ¥Ό μ‚΄ν΄λ³΄λ©΄ λλ‹¤. μ¤ν”„λ§μ΄ DI λ¥Ό μ΄μ©ν•΄ λ¨λ“  κΈ°λ¥μ„ μ κ³µν•κΈ° λ•λ¬Έμ΄λ‹¤.

- ex> `DataSourceTransactionManager`
    - `JdbcTemplate`μ„ μ΄μ©ν•΄ DAO λ¥Ό λ§λ“¤κ³  νΈλμ­μ… AOP λ¥Ό μ μ©ν•λ ¤λ©΄ `DataSourceTransactionManager`λ¥Ό λΉμΌλ΅ λ“±λ΅ν•΄μ•Ό ν•λ‹¤.
    
    ```java
    <bean id="transactionManager"
          class="org.springframework.jdbc.datasource.DataSourceTransactionManager">
      <property name="dataSource" ref="dataSource"/>
    </bean>
    ```
    
- κµ¬ν„ μΈν„°νμ΄μ¤ λ¶„μ„
    - κµ¬ν„ μΈν„°νμ΄μ¤κ°€ λ¬΄μ—‡μΈμ§€ νμ•…ν•λ” λ°©λ²•
        1. μ¤ν”„λ§ API λ¬Έμ„μ—μ„ `DataSourceTransactionManager` ν•­λ©μ„ μ°Ύμ•„λ³Έλ‹¤.
        2. IDE μ—μ„ ν΄λμ¤μ νƒ€μ… κ³„μΈµκµ¬μ΅°λ¥Ό λ³΄λ” κΈ°λ¥μ„ μ‚¬μ©ν•λ‹¤.
- ν”„λ΅νΌν‹° λ¶„μ„
    - λΉμ ν΄λμ¤μ μ„¤μ • λ°©λ²•κ³Ό ν™•μ¥ λ°©λ²•μ„ μ‚΄ν΄λ΄μ•Ό ν•λ‹¤.
    - λΉ ν΄λμ¤μ ν™μ© λ°©λ²•, ν™•μ¥ λ°©λ²•, λ””ν΄νΈμ™€ λ‹¤λ¥Έ λ™μ‘μ„ κ°€λ¥ν•κ² ν•λ” λ°©λ²•μ— κ΄€ν• μ§€μ‹μ€ λ€λ¶€λ¶„ ν΄λμ¤μ ν”„λ΅νΌν‹°λ¥Ό μ‚΄ν΄λ³΄λ©΄ μ• μ μλ‹¤.
- DI / ν™•μ¥ ν¬μΈνΈ λ¶„μ„
    - `DataSourceTransactionManager`κ°€ `DataSource`λΌλ” μΈν„°νμ΄μ¤λ¥Ό ν†µν•΄ λ‹¤λ¥Έ λΉμ„ μ°Έμ΅°ν•λ‹¤λ” κ±΄ DI μ λ¨λ“  κΈ°λ¥μ„ ν™μ©ν•  μ μλ” ν™•μ¥ ν¬μΈνΈλ¥Ό κ°–κ³  μλ‹¤κ³  μ΄ν•΄ν•  μ μλ‹¤.
    - μ¤ν”„λ§μ΄ μ‹¤μ  DB μ»¤λ„¥μ…μ„ μ§€μ›ν•λ” `DataSource`μ™€ `DataSource` νƒ€μ…μ ν”„λ΅νΌν‹°λ¥Ό κ°–λ” λΉ μ‚¬μ΄μ— λ°μ½”λ μ΄ν„° ν¨ν„΄μ΄λ‚ ν”„λ΅μ‹ ν¨ν„΄μ„ μ΄μ©ν•΄ λ¶€κ°€κΈ°λ¥ λλ” μ ‘κ·Όμ μ–΄ κΈ°λ¥μ„ μ κ³µν•΄μ£Όλ” λΉμ„ λ§λ“¤λ ¤κ³  ν•  λ• μ μ©ν• κΈ°λ° ν΄λμ¤ `DelegatingDataSource`λ¥Ό μ κ³µν•΄μ¤€λ‹¤.
    - μ¤ν”„λ§μ΄ μ κ³µν•λ” `DelegatingDataSource` κΈ°λ° λ‹¤μ–‘ν• λ°μ½”λ μ΄ν„° λλ” ν”„λ΅μ‹
        - `LazyConnectionDataSourceProxy`
            - νΈλμ­μ… λ§¤λ‹μ €μ™€ μ‹¤μ  `DataSource` μ‚¬μ΄μ—μ„ DB μ»¤λ„¥μ… μƒμ„±μ„ μµλ€ν• μ§€μ—°μ‹μΌμ£Όλ” κΈ°λ¥μ„ μ κ³µν•΄μ¤€λ‹¤.
            - μ μ©
                
                ```java
                <bean id="dataSource" class="...LazyConnectionDataSourceProxy">
                        <property name="targetDataSource" ref="realDataSource" />
                </bean>
                <bean id="realDataSource" class="..."> ... </bean>
                ```
                
        - `AbstractRoutingDataSource`
            - μ¶”μƒ ν΄λμ¤μ΄λ―€λ΅ μƒμ†μ„ ν†µν•΄ κΈ°λ¥μ„ μ¶”κ°€ν•κ³  μ‚¬μ©ν•΄μ•Ό ν•λ‹¤. μ¤ν”„λ§μ€ `AbstractRoutingDataSource`μ μ„λΈν΄λμ¤λ΅ `IsolationLevelDataSourceRouter`λ¥Ό μ κ³µν•κ³  μλ‹¤.
            - λ‹¤μ¤‘ `DataSource`μ— λ€ν• λΌμ°ν…μ„ μ κ³µν•λ” ν”„λ΅μ‹λ‹¤. μ—¬λ¬ κ°μ `DataSource`κ°€ μ΅΄μ¬ν•μ§€λ§ DAO λ‚ νΈλμ­μ… λ§¤λ‹μ €μ—λ” ν•λ‚μ `DataSource`λ§ μ΅΄μ¬ν•λ” κ²ƒμ²λΌ μ‚¬μ©ν•λ„λ΅ λ§λ“¤μ–΄μ•Ό ν•  λ• μ‚¬μ©ν•λ‹¤.
            - μ½κΈ°μ „μ© λΌμ°ν… `DataSource` λΉ μ„¤μ •
                
                ```java
                public class ReadOnlyRoutingDataSource extends AbstractRoutingDataSource {
                    protected object determineCurrentLookupKey() {
                        boolean readOnly = TransactionSynchronizationManager.isCurrentTransactionReadOnly();
                        return readOnly ? "READAONLY" "READWRITE";
                    }
                }
                
                <bean id="dataSourceRouter" class="... ReadOnlyRoutingDataSource">
                    <property name="targetDataSources">
                        <map>
                            <entry key="READWRITE" value-ref="masterDataSource" />
                            <entry key="READONLY" value-ref="readOnlyDataSource"/>
                        </map>
                    </property>
                    <property name="defaultTargetDataSource" ref="masterDataSource"/>
                </bean>
                <bean id="masterDataSource" class="...">...</bean>
                <bean id="readOnlyDataSource" class="...">...</bean>
                ```
                

## 2. IoC μ»¨ν…μ΄λ„ DI

- `DispatcherServlet`κ³Ό λ§μ°¬κ°€μ§€λ΅ μ¤ν”„λ§ IoC/DI μ»¨ν…μ΄λ„, μ¦‰ μ• ν”λ¦¬μΌ€μ΄μ… μ»¨ν…μ¤νΈλ„ κ·Έ μμ²΄λ΅λ” λΉμ€ μ•„λ‹μ§€λ§ DI λ¥Ό λ°›λ”λ‹¤.
    - μ§μ ‘Β `<property>`λ¥Ό μ‚¬μ©ν•΄ μ„¤μ •ν•΄μ¤„ μλ” μ—†μ§€λ§ μ• ν”λ¦¬μΌ€μ΄μ… μ»¨ν…μ¤νΈλ” μμ‹ μ ν™•μ¥ ν¬μΈνΈ μΈν„°νμ΄μ¤λ¥Ό κµ¬ν„ν• λΉμ„ μ°Ύμ•„μ„ μ¤μ¤λ΅ DI ν•λ‹¤.
    - μ—„λ°€ν λ§ν•λ©΄ DL μ΄λΌκ³  λ³Ό μ μλ‹¤.

### 2-1. `BeanPostProcessor`μ™€ `BeanFactoryPostProcessor`

---

- κ°€μ¥ λ§μ΄ μ‚¬μ©λλ” IoC μ»¨ν…μ΄λ„μ ν™•μ¥ ν¬μΈνΈ: λΉ ν›„μ²λ¦¬κΈ°, λΉ ν©ν† λ¦¬ ν›„μ²λ¦¬κΈ°
- λΉ ν›„μ²λ¦¬κΈ°λ” `BeanPostProcessor` μΈν„°νμ΄μ¤λ΅ μ •μλμ–΄ μκ³  μ‹¤μ  λΉ μ¤λΈμ νΈλ¥Ό μƒμ„±ν•λ” μ‹μ μ—μ„ μ‚¬μ©λλ‹¤.
- λΉ ν©ν† λ¦¬ ν›„μ²λ¦¬κΈ°λ” `BeanFactoryPostProcessor` μΈν„°νμ΄μ¤λ¥Ό μ‚¬μ©ν•κ³  λΉ μ„¤μ • λ©”νƒ€λ°μ΄ν„°κ°€ μ¤€λΉ„λ μ‹μ μ—μ„ μ‚¬μ©λλ‹¤.

- `BeanPostProcessor`
    
    ```java
    public interface BeanPostProcessor (
        Object postProcessBeforelnitialization(Object bean, String beanName) throws BeansException;
        Object postProcessAfterlnitialization(Object bean, String beanName) throws BeansException;
    }
    ```
    
    - `postProcessBeforelnitialization()` λ©”μ†λ“λ” λΉ μ¤λΈμ νΈκ°€ μ²μ λ§λ“¤μ–΄μ§€κ³  μ•„μ§ μ΄κΈ°ν™” λ©”μ†λ“κ°€ νΈμ¶λκΈ° μ΄μ „μ— μ‹¤ν–‰λλ‹¤.
    - `@Autowired`λ‚ `@Inject`κ°™μ€ μ• λ…Έν…μ΄μ…μ„ μ΄μ©ν•΄μ„ μ •μλ λΉ μμ΅΄κ΄€κ³„λ¥Ό μ μ©ν•λ” κ²ƒλ„ `BeanPostProcessor`λ¥Ό κµ¬ν„ν• λΉμ΄ ν•΄μ£Όλ” μ‘μ—…μ΄λ‹¤.
    - AOP μ λ™μ‘μ›λ¦¬μΈ μλ™ ν”„λ΅μ‹ μƒμ„±κΈ°λ„ μ—­μ‹ `BeanPostProcessor`λ¥Ό κµ¬ν„ν• λΉμ΄λ‹¤.
        - μλ™ ν”„λ΅μ‹ μƒμ„±κΈ°λ” μƒλ΅μ΄ ν”„λ΅μ‹ μ¤λΈμ νΈλ¥Ό λ§λ“  λ’¤ μ›λ λΉ μ¤λΈμ νΈλ¥Ό ν”„λ΅μ‹ μ•μΌλ΅ κ°μ¶λ‹¤.
- `BeanFactoryPostProcessor`
    - `BeanFactoryPostProcessor`λ” λΉ μ¤λΈμ νΈκ°€ μ•„λ‹λΌ λΉ ν©ν† λ¦¬μ— λ€ν• ν›„μ²λ¦¬λ¥Ό κ°€λ¥ν•κ² ν•λ” ν™•μ¥ ν¬μΈνΈ μΈν„°νμ΄μ¤λ‹¤.
    
    ```java
    public interface BeanFactoryPostProcessor {
        void postProcessBeanFactory(ConfigurableListableBeanFactory beanFactory) throws BeansException;
    }
    ```
    
    - μ»¨ν…μ΄λ„λ” λΉ ν©ν† λ¦¬ ν›„μ²λ¦¬κΈ°κ°€ μμΌλ©΄ `postProcessBeanFactory()`μ— λΉμ λ¨λ“  λ©”νƒ€μ •λ³΄λ¥Ό λ‹΄κ³  μλ” `ConfigurableListableBeanFactory`νƒ€μ…μ μ¤λΈμ νΈλ¥Ό μ „λ‹¬ν•΄μ£Όλ”λ° λ°”λ΅ μ»¨ν…μ΄λ„ μμ‹ μ„ λ³΄λ‚΄μ£Όλ” κ²ƒμ΄λ‹¤.
    - ν”„λ΅νΌν‹° κ°’μ„ μ¶”κ°€λ΅ μ„¤μ •ν•λ” μμ¤€μ΄ μ•„λ‹λΌ, μ•„μ μƒλ΅μ΄ λΉμ„ λ“±λ΅ν•  μλ„ μλ‹¤.
    - `ConfigurableListableBeanFactory`κ°€ `@Configuration`κ³Ό `@Bean`μ΄ λ¶™μ€ ν΄λμ¤ μ •λ³΄λ¥Ό μ΄μ©ν•΄μ„ μƒλ΅μ΄ λΉμ„ μ¶”κ°€ν•΄μ£Όλ” κΈ°λ¥μ„ λ‹΄λ‹Ήν•λ‹¤.


## 3. SpEL

- μ¤ν”„λ§μ΄ μ§μ ‘ μ κ³µν•λ” ν‘ν„μ–Έμ–΄μΈ μ¤ν”„λ§ EL μ„ SpEL μ΄λΌκ³  ν•λ‹¤.
- SpEL μ€ λ‹¤μ–‘ν• μ©λ„λ΅ ν™μ©ν•λ‹¤.
    - λΉ μ„¤μ •νμΌμ΄λ‚ μ• λ…Έν…μ΄μ…μ„ μ΄μ©ν•΄ ν”„λ΅νΌν‹° κ°’μ„ μ§€μ •ν• λ• μ‚¬μ©ν•λ‹¤.
    - JSPμ `<spring:eval>` νƒκ·Έλ¥Ό ν†µν•΄ μ‚¬μ©ν•λ‹¤.

```java
// μ‚¬μ©μμ μ΅°κ±΄μ— λ”°λΌμ„ μ‚¬μ© κ°€λ¥ μ—¬λ¶€ νλ³„
@SecuredLogic ("user.level == T(com ... UserLevel).GOLD")
public void goldUserOnly() { ... }
// ν¬μΈνΈμ™€ μ¬μ‹λ„ νμ κΈ°μ¤€μΌλ΅ μ΅°κ±΄
@SecuredLogic("user.point > 100 && user.retryCount < 5")
public void transferPoint() { ... }
```

### 3-1. SpEL μ‚¬μ© λ°©λ²•

---

- SpELμ„ μ½”λ“μ—μ„ μ‚¬μ©ν•λ ¤λ©΄ λ‘κ°€μ§€ μΈν„°νμ΄μ¤λ¥Ό ν™μ©ν•΄μ•Ό ν•λ‹¤.
    - `ExpressionParser`
        - ν‘ν„μ‹μ„ νμ‹±ν•λ” κΈ°λ¥μ΄ μ •μλμ–΄ μλ” μΈν„°νμ΄μ¤
        - `SpelExpressionParser()`μ„ μ£Όλ΅ μ‚¬μ©ν•λ‹¤.
        
        ```java
        ExpressionParser parser = new SpelExpressionParser();
        ```
        
        - λΉμΌλ΅ λ“±λ΅ν•΄λ‘κ³  DI λ°›λ” λ°©λ²•μ΄ λ‚«λ‹¤.
            - `SpelExpressionParser`λ” μ‹±κΈ€ν†¤μΌλ΅ λ“±λ΅ν•κ³  κ³µμ ν•΄μ„ μ‚¬μ©ν•΄λ„ μ•μ „ν• ν΄λμ¤λ‹¤.
    - `Expression`
        - νμ„μ— μν•΄ ν•΄μ„λ ν‘ν„μ‹ μ •λ³΄λ¥Ό κ°€μ§„ μ¤λΈμ νΈμ νƒ€μ…
        - `ExpressionParser`λ΅λ¶€ν„° νμ‹±μ„ ν†µν•΄ `Expression`μ„ λ§λ“¤μ–΄λ‘κ³ , `Expression` μ¤λΈμ νΈμ—μ„ κ°’μ„ κ°€μ Έμ¬ μ μλ‹¤.
        - κ³ μ •μ  νμ‹±
            
            ```java
            Expression ex = parser.parseExpression("1+2");
            int result = (Integer) ex.getValue();
            ```
            
            - μ™ νμ„λ΅λ¶€ν„° λ°”λ΅ νμ‹±ν•΄μ„ κ²°κ³Όκ°’μ„ λ°›μ§€ μ•κ³ , `Expression` νƒ€μ…μΌλ΅ λ§λ“  ν›„ κ°’μ„ κ°€μ Έμ¤λ” κ²ƒμΌκΉ? β†’ `Expression` μ¤λΈμ νΈλ¥Ό μ¬μ‚¬μ©ν•  μ μκΈ° λ•λ¬Έ
        - μ¤λΈμ νΈλ¥Ό μ§μ ‘ μ „λ‹¬ν•λ” λ€μ‹  `EvaluationContext`μ— λ‹΄μ•„ μ‚¬μ©ν•λ” λ°©λ²•λ„ μλ‹¤.
            
            ```java
            @Test
            public void context() {
              ExpressionParser parser = new SpelExpressionParser();
              Expression exp = parser.parseExpression("name.length() < 10");
            
              EvaluationContext **context** = new StandardEvaluationContext(new Foo("foo"));
              Boolean result = exp.getValue(**context**, Boolean.class);
              assertThat(result).isTrue();
            }
            ```
            
            - λ£¨νΈ μ¤λΈμ νΈ λΏ μ•„λ‹λΌ, μ΄λ¦„μ„ κ°€μ§„ λ³€μ, λ©”μ†λ“, μ»¨λ²„ν„° λ“±μ„ ν•¨κ» μ κ³µν•  μ μλ‹¤.


## 4. OXM

- μ¤ν”„λ§ OXMμ€ μ„λΉ„μ¤ μ¶”μƒν™”κ°€ μ μ©λ κΈ°μ μ΄λ‹¤.
    - νΈλμ­μ…μ΄λ‚ OXM κ°™μ€ μ„λΉ„μ¤ μ¶”μƒν™”λ” λ¨Όμ € μ¤ν”„λ§μ΄ μ κ³µν•λ” μΈν„°νμ΄μ¤μ μ‚¬μ© λ°©λ²•μ„ μµνκ³ , κ° κΈ°μ λ³„λ΅ μ κ³µλλ” μ–΄λ‘ν„° λΉμ μ„¤μ • λ°©λ²•μ„ μ‚΄ν΄λ΄μ•Ό ν•λ‹¤.
- μ„λΉ„μ¤ μ¶”μƒν™”λ¥Ό ν†µν•΄ OXM κµ¬ν„ κΈ°μ μ΄ λ°”λ€λ”λΌλ„ μ΄λ¥Ό μ‚¬μ©ν•λ” μ½”λ“μ—λ” μν–¥μ„ μ£Όμ§€ μ•μΌλ―€λ΅, μµμ™ν• κµ¬ν„ κΈ°μ  ν•λ‚λ¥Ό μ„ νƒν•΄μ„ μ§‘μ¤‘μ μΌλ΅ λ¶„μ„ν•κ³  μ‹¤μ  μ½”λ“μ— μ μ©ν•΄λ³΄λ©΄μ„ μ‚¬μ© λ°©λ²•μ„ μµνλ” κ²ƒμ΄ μ¤‘μ”ν•λ‹¤.
- μ¤ν”„λ§μ—μ„ OXM(Object XML Mapping) μ¶”μƒν™”λ¥Ό μ μ©ν•λ” λ‘κ°€μ§€ λ°©λ²•
    - μ½”λ“μ—μ„ μ§μ ‘ λ§μƒ¬λ¬ λΉμ„ κ°€μ Έμ™€ `Marshaller`μΈν„°νμ΄μ¤λ¥Ό μ΄μ©ν•΄μ„ XMLκ³Ό μ¤λΈμ νΈ μ‚¬μ΄μ λ³€κ²½μ‘μ—…μ„ μν–‰ν•λ” λ°©λ²•
    - μ›Ή ν™κ²½μ—μ„ XML λ·°λ‚ XML λ©”μ‹μ§€ μ»¨λ²„ν„°λ¥Ό λ§λ“¤λ• ν™μ©ν•λ” λ°©λ²•

### 4-1. Marshaller/Unmarshaller μΈν„°νμ΄μ¤

---

- `Marshaller`: μ¤λΈμ νΈλ¥Ό XML λ΅ λ³€ν™ν•λ” κΈ°λ¥μ„ μ¶”μƒν™”ν• μΈν„°νμ΄μ¤
    
    ```java
    public interface Marshaller {
        boolean supports(Class<?> clazz);
        void marshal(Obiect graph, Result result) throws IOException, XmlMappingException;
    }
    ```
    
- `Unmarshaller`: XML μ†μ¤λ΅λ¶€ν„° μ¤λΈμ νΈλ¥Ό λ³€ν™ν•΄μ£Όλ” κΈ°λ¥μ„ μ •μν• μΈν„°νμ΄μ¤
    
    ```java
    public interface Unmarshaller {
        boolean supports(Class<?> clazz);
        Object unmarshal(Source source) throws IOException, XmlMappingException;
    }
    ```
    

### 4-2. OXM κΈ°μ  μ–΄λ‘ν„° ν΄λμ¤

---

- `Marshaller`μ™€ `Unmarshaller` μ¶”μƒ μΈν„°νμ΄μ¤λ¥Ό κµ¬ν„ν•΄μ„ κ° OXM κΈ°μ κ³Ό μ—°κ²°ν•΄μ£Όλ” μ–΄λ‘ν„° ν΄λμ¤
    - κ° κΈ°μ  μ΄λ¦„ λ’¤μ— `Marshaller`λ¥Ό λ¶™μ΄λ©΄ μ§€μ› ν΄λμ¤λ‹¤.
    - `Castor`
    - `JAXB`
    - `XMLBeans`
    - `JiBX`
    - `XStream`
- ν•λ‚μ μ–΄λ‘ν„° ν΄λμ¤κ°€ `Marshaller`μ™€ `Unmarshaller`λ¥Ό λ¨λ‘ κµ¬ν„ν•κ³  μλ‹¤. λΉ„λ΅ κ°™μ€ μ¤λΈμ νΈμ΄μ§€λ§ κ°κ° μ ‘κ·Όν•λ” μΈν„°νμ΄μ¤κ°€ λ‹¤λ¥΄κ³  μ©λ„κ°€ λ‹¤λ¥΄λ―€λ΅ λ³„κ°μ ν”„λ΅νΌν‹°λ΅ μ£Όμ…λ°›λ” κ²ƒμ΄ μΆ‹λ‹¤.
    
    ```java
    <bean id="castorMarshaller" class="org.springframework.oxm.castor.CastorMarshaller" />
    
    <bean id="myService" class="...">
        <property name="marshaller" ref="castorMarshaller" />
        <property name="unmarshaller" ref="castorMarshaller" />
    </bean>
    
    <oxm:jaxb2-marshaller id="marshaller" contextPath="com.epril.myproject.xml.user.schema" />
    ```
    

## 5. λ¦¬λ¨ν…κ³Ό μ›Ή μ„λΉ„μ¤, EJB

- μλ°” μ—”ν„°ν”„λΌμ΄μ¦μ—λ” λ‹¤μ–‘ν• μΆ…λ¥μ λ¦¬λ¨ν… κΈ°μ μ΄ μ΅΄μ¬ν•λ‹¤. λ‹Ήμ—°ν μ¤ν”„λ§μ—μ„λ„ μ΄λ¬ν• λ¦¬λ¨ν… κΈ°μ μ„ μ§€μ›ν•λ‹¤.
- μ¤ν”„λ§μ΄ μ§€μ›ν•λ” λ¦¬λ¨ν… κΈ°μ 
    - `RMI`
    - μ¤ν”„λ§ HTTP Invoker
    - `Hessian`
    - `Burlap`
    - `JAX- RPC`
    - `JAX-WS`
    - `JMS`
    - `RESTful`
- λ¦¬λ¨ν…μ€ μ›κ²© μ‹μ¤ν…κ³Ό μ¤ν”„λ§ μ• ν”λ¦¬μΌ€μ΄μ…μ΄ μ—°λ™ν•΄μ„ λ™μ‘ν•κ² ν•΄μ£Όλ” κΈ°μ μ΄λ‹¤.
    - μ¤ν”„λ§ μ• ν”λ¦¬μΌ€μ΄μ…μ΄ ν΄λΌμ΄μ–ΈνΈ μ‹μ¤ν…μ—κ² μ›κ²© μ„λΉ„μ¤λ¥Ό μ κ³µν•λ” κ²ƒκ³Ό λ‹¤λ¥Έ μ›κ²© μ‹μ¤ν…μ μ„λΉ„μ¤λ¥Ό μ΄μ©ν•λ” κ²ƒ, 2κ°€μ§€λ΅ κµ¬λ¶„ν•  μ μλ‹¤.

### 5-1. μµμ¤ν¬ν„°μ™€ ν”„λ΅μ‹

---

- μ¤ν”„λ§ λ¦¬λ¨ν…μ κΈ°λ³Έ κµ¬μ„±μ€ ν…ν”λ¦Ώ λ°©μ‹μ ν΄λΌμ΄μ–ΈνΈλ§ μ κ³µν•λ” `RESTful`μ„ μ μ™Έν•λ©΄ κ±°μ λ™μΌν•λ‹¤.
- μ¤ν”„λ§μ€ μ„λΉ„μ¤λ¥Ό μ κ³µν•  λ•λ‚ μ‚¬μ©ν•  λ•λ‚ λ¨λ‘ μΈν„°νμ΄μ¤λ¥Ό μ΄μ©ν•΄μ•Ό ν•λ‹¤.
    - μ›κ²© μ„λΉ„μ¤λ¥Ό μ‚¬μ©ν•  λ•λ„, μ›κ²© μ„λΉ„μ¤μ λ‚΄μ©μ΄ λ‹΄κΈ΄ μΈν„°νμ΄μ¤λ¥Ό ν†µν•΄ μ ‘κ·Όν•΄μ•Ό ν•λ‹¤.

- μµμ¤ν¬ν„°
    - μ„λΉ„μ¤λ¥Ό μ κ³µν•  λ• μ›κ²© μ”μ²­μ„ λ°›μ•„μ„ νΉμ • μΈν„°νμ΄μ¤λ¥Ό κµ¬ν„ν• μ„λΉ„μ¤ λΉμ—κ² μ”μ²­μ„ μ „λ‹¬ν•΄μ£Όλ” λΉμ„ μ΄μ©ν•λ”λ°, μ΄λ¥Ό μµμ¤ν¬ν„°λΌκ³  ν•λ‹¤.
        
        ![Untitled](./images/Untitled.png)
        
    - λ³΄ν†µ μµμ¤ν¬ν„°λ” μ›κ²© μ”μ²­μ„ μ²λ¦¬ν•λ” μ„λΈ”λ¦Ώ λ“±μ„ ν†µν•΄ HTTPμ”μ²­μ„ μ „λ‹¬λ°›κ³  μ΄λ¥Ό ν•΄μ„ν• ν›„μ— λ―Έλ¦¬ μ„¤μ •μ„ ν†µν•΄μ„ λ“±λ΅λ μΈν„°νμ΄μ¤λ¥Ό μ΄μ©ν•΄ μ„λΉ„μ¤ λΉμ„ νΈμ¶ν•λ‹¤.
    - μµμ¤ν¬ν„° λΉ
        
        ```java
        <bean name="/remoting/userservice" class="org.springframework.remoting.httpinvoker.HttpInvokerServiceExporter">
            <property name="service" ref="userService"/>
            <property name="serviceInterface" value="com.epril.myproject.service.UserService"/>
        </bean>
        ```
        
- ν”„λ΅μ‹
    - μ›κ²© μ‹μ¤ν…μ— μλ” μ¤λΈμ νΈλ¥Ό λ€μ‹ ν•΄μ„ ν΄λΌμ΄μ–ΈνΈ μ¤λΈμ νΈμ νΈμ¶μ„ λ°›κ³ , μ΄λ¥Ό μ›κ²© μ¤λΈμ νΈμ— μ „μ†΅ν•΄μ„ κ²°κ³Όλ¥Ό κ°€μ Έμ™€ ν΄λΌμ΄μ–ΈνΈ μ¤λΈμ νΈμ—κ² λλ ¤μ£Όλ” μ—­ν• μ„ λ§΅μ€ λΉ μ¤λΈμ νΈλ¥ΌΒ ν”„λ΅μ‹λΌκ³  λ¶€λ¥Έλ‹¤.
        - μ „ν•μ μΈ μ›κ²© ν”„λ΅μ‹ ν¨ν„΄μ΄ μ μ©λ μλΌκ³  λ³Ό μ μλ‹¤.
    - ν”„λ΅μ‹λ” μ›κ²© μ„λΉ„μ¤ λ‚΄μ©μ΄ μ •μλ μΈν„°νμ΄μ¤λ¥Ό κµ¬ν„ν•κ³  μμ–΄μ•Ό ν•λ‹¤. κ·Έλμ„ μ΄λ¥Ό μ‚¬μ©ν•λ” λΉ μ…μ¥μ—μ„λ” μ›κ²© νΈμ¶μ΄ μΌμ–΄λ‚λ”μ§€λ¥Ό μ‹ κ²½ μ“°μ§€ μ•κ³ , κ°™μ€ μ»¨ν…μ΄λ„ μ•μ λΉ μ¤λΈμ νΈλ¥Ό μ‚¬μ©ν•λ“― μ“°λ” κ²ƒμ΄λ‹¤. λ¨λ“  λ¦¬λ¨ν… νΈμ¶μ κ³µν†µμ μΈ λ™μ‘μ›λ¦¬λ‹¤.
        
        ![Untitled](./images/Untitled%201.png)
        
    - JAX-WS ν”„λ΅μ‹ λΉ
        
        ```java
        <bean id="memberWebService" class="org.springframework.remoting.jaxws.JaxWsPortProxyFactoryBean">
            <property name="serviceInterface" value="com.epril.myproject.service.MemberService"/>
            <property name="wsdlDocumentUrl" value="http://ws.remotecompany.com/MemberServiceEndPointWSDL" />
            <property name="namespaceUri" value="http://remote/" />
            <property name="serviceName" value="MemberService"/>
            <property name="portName" value="MemberServiceServiceEndpointPort"/>
        </bean>
        <bean id="myBean" class="...">
            <property name="memberService" ref="memberWebService" />
        </bean>
        ```
        

π‘‰Β λ¨λ“  μ¤ν”„λ§μ λ¦¬λ¨ν… μ§€μ› κΈ°λ¥μ€ μµμ¤ν¬ν„°μ™€ ν”„λ΅μ‹ λ°©μ‹μ„ μ‚¬μ©ν•λ‹¤.

### 5-2. RESTful μ„λΉ„μ¤ ν…ν”λ¦Ώ

---

- `RESTful` ν΄λΌμ΄μ–ΈνΈ κΈ°λ¥μ€ μ—¬νƒ€ λ¦¬λ¨ν… κΈ°μ κ³Ό μ‚¬μ© λ°©λ²•μ΄ λ‹¤λ¥΄λ‹¤. `RESTful` μ„λΉ„μ¤λ” μ¤ν”„λ§ MVC λ¥Ό ν†µν•΄ κµ¬ν„ν•λ―€λ΅, λ¦¬λ¨ν…μ—μ„λ” μ›κ²© `RESTful` μ„λΉ„μ¤ μ‚¬μ΄νΈλ¥Ό μ΄μ©ν•΄ κ²°κ³Όλ¥Ό κ°€μ Έμ¤λ” ν΄λΌμ΄μ–ΈνΈ κΈ°λ¥λ§ μ κ³µν•λ‹¤.
- `RESTful` μ„λΉ„μ¤λ¥Ό μ΄μ©ν•  λ•λ” μ„λΉ„μ¤ μΈν„°νμ΄μ¤ νƒ€μ…μ ν”„λ΅μ‹ λ€μ‹  ν…ν”λ¦Ώ/μ½λ°± λ°©μ‹μ ν…ν”λ¦Ώμ„ μ΄μ©ν•λ‹¤.
- RESTful ν΄λΌμ΄μ–ΈνΈλ” HTTP λ©”μ†λ“ `GET`, `POST`, `PUT`, `DELETE`, `HEAD`, `OPTIONS`λ¥Ό λ¨λ‘ μ§€μ›ν•λ‹¤. κ²°κ³Όλ” λ¬Έμμ—΄λ΅ κ·Έλ€λ΅ λ°›μ„ μλ„ μκ³ οΌ λ©”μ‹μ§€ μ»¨λ²„ν„°λ¥Ό μ΄μ©ν•΄ μ¤λΈμ νΈλ΅ λ³€ν™ν• μλ„μλ‹¤.

- κ³Όμ •
    - `RestTemplate` μ¤λΈμ νΈλ¥Ό μƒμ„±ν•λ‹¤. μΈμ¤ν„΄μ¤ λ³€μλ΅ μƒμ„±ν•΄λ‘κ±°λ‚ λΉμΌλ΅ λ“±λ΅ν• ν›„μ— DI λ°›μ•„μ„ μ‚¬μ©ν•΄λ„ μƒκ΄€μ—†λ‹¤.
        
        ```java
        RestTemplate template = new RestTemplate();
        // κ²°κ³Όλ¥Ό λ¬Έμμ—΄λ΅ λ°›λ”λ‹¤.
        String result = template.getForObject("https://www.notion.so/{userId}", String.class, "jennyuni");
        ```
        
    - μ¤λΈμ νΈλ΅ λ³€ν™ν•΄μ„ λ°›μ„ κ²½μ°, μ‚¬μ©ν•  λ©”μ‹μ§€ μ»¨λ²„ν„°λ¥Ό `RestTemplate`μ `messageConverts` ν”„λ΅νΌν‹°μ— λ“±λ΅ν•κ³  μ‚¬μ©ν•λ©΄ λλ‹¤.
    - `MappingJacksonHttpMessageConverter`λ¥Ό ν…ν”λ¦Ώμ λ©”μ‹μ§€ μ»¨λ²„ν„°λ΅ λ“±λ΅ν•΄μ„ κ²°κ³Όλ¥Ό μ¤λΈμ νΈλ΅ λ¦¬ν„΄ν•κ² ν•  μλ„ μλ‹¤.
- `RESTful` μ¤νƒ€μΌμ μ„λΉ„μ¤λ” μ§λ ¬ν™”λ¥Ό μ΄μ©ν•λ” ν”„λ΅ν† μ½μ΄λ‚ λ³µμ΅ν• μ”μ²­ λ©”μ‹μ§€λ¥Ό μ‘μ„±ν•μ§€ μ•κ³ λ„ μ†μ‰½κ² URL κ³Ό νλΌλ―Έν„°λ¥Ό μ΄μ©ν•΄ μ„λΉ„μ¤μ— μ ‘κ·Όν•  μ μκΈ° λ•λ¬Έμ— κ·Έλ§νΌ μ‚¬μ© λ°©λ²•λ„ κ°„λ‹¨ν•λ‹¤.

### 5-3. EJB μ„λΉ„μ¤ μ΄μ©

---

- EJB 2λ‚ EJB 3λ΅ λ§λ“¤μ–΄μ§„ μ»΄ν¬λ„νΈκ°€ μκ³ , EJB μ»¨ν…μ΄λ„μ—μ„ μ„λΉ„μ¤λκ³  μλ‹¤λ©΄ μ΄λ¥Ό μ¤ν”„λ§μ—μ„ μ‚¬μ©ν•  μ μλ‹¤.
- μ¤ν”„λ§μ€ EJBλ„ λ¦¬λ¨ν…μ ν”„λ΅μ‹μ™€ λΉ„μ·ν• λ°©μ‹μΌλ΅ μ ‘κ·Όν•λ„λ΅ ν•΄μ¤€λ‹¤.
    - λ΅μ»¬ μ„Έμ…λΉκ³Ό λ¦¬λ¨νΈ μ„Έμ…λΉ λ¨λ‘ λ™μΌν• λ°©λ²•μΌλ΅ μ‚¬μ© κ°€λ¥ν•λ‹¤.


## 6. νƒμ¤ν¬ μ‹¤ν–‰κ³Ό μ¤μΌ€μ¤„λ§

### 6-1. TaskExecutor μ„λΉ„μ¤ μ¶”μƒν™”

---

- `java.lang.Runnable`μ€ `run()`μ΄λΌλ” λ‹¨μν• λ©”μ†λ“λ¥Ό κ°€μ§„ μΈν„°νμ΄μ¤λ΅μ„ λ…λ¦½μ μΈ μ¤λ λ“μ— μν•΄ μ‹¤ν–‰λλ„λ΅ μλ„λ μ¤λΈμ νΈλ¥Ό λ§λ“¤ λ• μ£Όλ΅ μ‚¬μ©λλ‹¤.
    - νƒμ¤ν¬: λ…λ¦½μ μΈ μ¤λ λ“ μ•μ—μ„ λ™μ‘ν•λ„λ΅ λ§λ“¤μ–΄μ§„ μ¤λΈμ νΈλ¥Ό λ…λ¦½μ μΌλ΅ μ‹¤ν–‰ κ°€λ¥ν• μ‘μ—…
    - νƒμ¤ν¬ μ‹¤ν–‰κΈ°: νƒμ¤ν¬λ¥Ό λ‹¤μ–‘ν• λ°©λ²•μΌλ΅ μ‹¤ν–‰ν•λ„λ΅ λ§λ“¤μ–΄μ§„ μ¤λΈμ νΈ νΉμ§•μ„ μ¶”μƒν™”ν•Β μ¤ν”„λ§μ μΈν„°νμ΄μ¤
        - `Runnable` νƒ€μ…μ νƒμ¤ν¬λ¥Ό λ°›μ•„ μ‹¤ν–‰ν•λ” `execute()`λ©”μ†λ“λ¥Ό κ°–κ³  μλ‹¤.
            - μλ°” 5μ `Executor`λ” `TaskExecutor`κ³Ό λ™μΌν• λ©μ μΌλ΅ λ§λ“¤μ–΄μ§„ μΈν„°νμ΄μ¤λ‹¤.
            - μ¤ν”„λ§μ΄ λ‹¤μ‹ λ‘κ°™μ€ λ©”μ†λ“λ¥Ό κ°€μ§„ `TaskExecutor`λ¥Ό μ •μν• μ΄μ 
                - JDK μ `Executor`λ¥Ό κµ¬ν„ν•μ§€ μ•μ€ νƒμ¤ν¬ μ‹¤ν–‰κΈ°μ— λ€ν• μ–΄λ‘ν„°λ¥Ό μ κ³µν•λ” μΆ€ λ” ν­λ„“μ€ μ„λΉ„μ¤ μ¶”μƒν™”λ¥Ό μ„ν•΄μ„λ‹¤.
                - μ¤ν”„λ§μ— μµμ ν™”λ λ°©μ‹μΌλ΅ νƒμ¤ν¬ μ‹¤ν–‰κΈ°λ¥Ό ν™•μ¥ν•κ³  ν™μ©ν•λ” λ…μμ μΈ νƒμ¤ν¬ μ‹¤ν–‰ κΈ°λ¥μ„ μ κ³µν•κΈ° μ„ν•΄μ„λ‹¤.
            - λ€λ¶€λ¶„μ `TaskExecutor`κ°€ μ¶”μƒν™”ν• κΈ°μ μ€ λΉ„λ™κΈ°μ μΌλ΅ λ…λ¦½μ μΈ μ¤λ λ“μ—μ„ μ‹¤ν–‰λλ©°, μ£Όλ΅ μ¤λ λ“ ν’€μ„ μ‚¬μ©ν•λ” λ°©μ‹μ„ μ‚¬μ©ν•λ‹¤.
        
        ```java
        public interface TaskExecutor extends Executor {
            void execute(Runnable task);
        }
        ```
        
        - μ¤ν”„λ§μ΄ μ κ³µν•λ” μ£Όμ”ν• `TaskExecutor` κµ¬ν„ κΈ°μ κ³Ό ν΄λμ¤
            - `ThreadPoolExecutor`
                - μ¤ν”„λ§μ `ThreadPoolExecutor`λ” μ΄λ¦„μ΄ κ°™μ€ JDK μ `ThreadPoolExecutor`μ— λ€ν• μ–΄λ‘ν„° ν΄λμ¤λ‹¤.
                - `corePoolSize`, `maxPoolSize`, `queueCapacity`κ°™μ€ μ†μ„±μ„ ν”„λ΅νΌν‹°λ¥Ό μ΄μ©ν•΄ μ„¤μ •ν•  μ μλ‹¤.
            - `SimpleThreadPoolTaskExecutor`
                - Quartz μ `SimpleThreadPool`μ„ μ΄μ©ν•΄ λ§λ“¤μ–΄μ§„ νƒμ¤ν¬ μ‹¤ν–‰κΈ°λ‹¤. `TaskExecutor` μ¶”μƒν™” μΈν„°νμ΄μ¤λ¥Ό ν†µν•΄ Quartz μ¤μΌ€μ¤„λ¬μ™€ λ…λ¦½μ μΌλ΅ μ‚¬μ©λλ©΄μ„ λ™μ‹μ— Quartz μ‘μ—…μ—λ„ ν™μ©λ  μ μλ‹¤λ” μ¥μ μ΄ μλ‹¤.
            - `WorkManagerTaskExecutor`
                - CommonJ μ‘μ—…κ΄€λ¦¬μ(`WorkManager`)μ νƒμ¤ν¬ μ‹¤ν–‰κΈ°μ— λ€ν• μ–΄λ‘ν„°λ‹¤. CommonJλ” μ›Ήλ΅μ§, μ›Ήμ¤ν”Όμ–΄ λ“± μ—¬λ¬ WAS μ JavaEE ν™κ²½μ„ μ„ν• λΉ„λ™κΈ° μ‘μ—…κ΄€λ¦¬μλ‹¤.
- μ¤ν”„λ§ μ• ν”λ¦¬μΌ€μ΄μ…μ΄ λ™μ‘ν•λ” μλ°” μ—”ν„°ν”„λΌμ΄μ¦ ν™κ²½μ€ μ ν•λ ν¬κΈ°μ μ¤λ λ“ν’€μ„ μ‚¬μ©ν•λ‹¤κ³  ν•λ”λΌλ„ λΉ„λ™κΈ° μ‘μ—…μ„ ν•¨λ¶€λ΅ μ μ©ν•λ” κ±΄ μ„ν—ν•λ‹¤.

### 6-2. TaskScheduler

---

- μλ°” μ—”ν„°ν”„λΌμ΄μ¦ ν™κ²½μ—μ„ μ‚¬μ©λλ” νƒμ¤ν¬λ” μΌμ •ν• κ°„κ²© λλ” μ‹κ°„ κΈ°μ¤€μ— λ”°λΌ μ‹¤ν–‰λλ” μ¤μΌ€μ¤„λ§ λ°©μ‹μΌλ΅ λ™μ‘ν•λ” κ²½μ°κ°€ λ€λ¶€λ¶„μ΄λ‹¤.
- μ¤ν”„λ§μ€ `TaskExecutor`μ™€ λ§μ°¬κ°€μ§€λ΅ μ„λΉ„μ¤ μ¶”μƒν™” κΈ°λ²•μ„ μ΄μ©ν•΄μ„ μ¤μΌ€μ¤„λ§ κΈ°μ μ— λ…λ¦½μ μΈ μ‚¬μ©μ΄ κ°€λ¥ν• μ¶”μƒν™” μ„λΉ„μ¤ μΈν„°νμ΄μ¤μΈ `TaskScheduler`λ¥Ό μ κ³µν•λ‹¤.
- `TaskScheduler` μΈν„°νμ΄μ¤λ” μ£Όμ–΄μ§„ νƒμ¤ν¬λ¥Ό μ΅°κ±΄μ— λ”°λΌ μ‹¤ν–‰ν•κ±°λ‚ λ°λ³µν•λ” μ‘μ—…μ„ μν–‰ν•λ‹¤.
    - νƒμ¤ν¬μ μ‹¤ν–‰μ΅°κ±΄μ€ λ‹¨μν νΉμ • μ‹κ°„μ— μ‹μ‘λλ„λ΅ λ§λ“¤ μλ„ μκ³ , μΌμ •ν• κ°„κ²©μ„ λ‘κ³  λ°λ³µλκ² ν•  μλ„ μλ‹¤.
    - `Trigger` μΈν„°νμ΄μ¤λ¥Ό κµ¬ν„ν•΄μ„ μΆ€ λ” μ μ—°ν• μ‹¤ν–‰μ΅°κ±΄μ„ λ§λ“¤ μλ„ μλ‹¤.
        
        ```java
        @Autowired TaskScheduler scheduler;
        @Resource Runnable specialTask;
        
        // μ›”~κΈ 4μ‹ 30λ¶„μ— λ™μ‘ν•λ„λ΅ μ„¤μ •
        public void startSpecialTaskScheduler() {
            scheduler.schedule(task, new CronTrigger("0 30 4 * * MON-FRI"));
        }
        ```
        

- `TaskScheduler` μ μ£Όμ” κµ¬ν„ ν΄λμ¤μ™€ μ‚¬μ© κΈ°μ 
    - `ThreadPoolTaskScheduler`
        - JDK μ `ScheduledThreadPoolExecutor` μ¤μΌ€μ¤„λ¬μ— λ€ν• μ–΄λ‘ν„°λ‹¤.
        - μ¤λ λ“ ν’€ λ°©μ‹μ νƒμ¤ν¬ μ‹¤ν–‰κΈ° κΈ°λ¥λ„ ν•¨κ» κ°–κ³  μλ‹¤.
    - `TimerManagerTaskScheduler`
        - CommonJ μ `TimerManager`λ¥Ό `TaskScheduler`λ΅ μ¶”μƒν™”ν• ν΄λμ¤

### 6-3. task λ„¤μ„μ¤νμ΄μ¤

---

μ¤ν”„λ§μ€ task μ¤ν‚¤λ§μ— μ •μλ μ „μ© νƒκ·Έλ¥Ό ν†µν•΄ νƒμ¤ν¬ μ‹¤ν–‰κΈ°μ™€ μ¤μΌ€μ¤„λ¬λ¥Ό κ°„νΈν•κ² λ“±λ΅ν•  μ μλ” λ°©λ²•μ„ μ κ³µν•λ‹¤.

- `<task:executor>`
    - `<task:executor>`λ” `ThreadPoolTaskExecutor` νƒ€μ…μ `TaskExecutor` λΉμ„ λ“±λ΅ν•΄μ¤€λ‹¤.
    - μ¤λ λ“ ν’€ ν¬κΈ°λ” λ²”μ„λ΅ μ§€μ •ν•  μλ„ μλ‹¤.
    
    ```java
    <task:executor id="myExecutor" pool-size="5-10" queue-size="30" />
    ```
    
- `<task:scheduler>`
    - `TaskScheduler` νƒ€μ…μ `ThreadPoolTaskScheduler` λΉμ„ λ“±λ΅ν•΄μ¤€λ‹¤.
    - `pool-size`λ¥Ό μƒλµν•λ©΄ κΈ°λ³Έ κ°’ 1μ΄ μ μ©λλ‹¤.
    
    ```java
    <task:scheduler id="myScheduler" />
    ```
    
- `<task:scheduled-tasks>`μ™€Β `<task:scheduled>`
    - μ¤μΌ€μ¤„λ¬λ¥Ό μ μ©ν•λ ¤λ©΄ νƒμ¤ν¬λ§λ‹¤ `Runnable`μ„ κµ¬ν„ν• ν΄λμ¤λ¥Ό λ§λ“¤μ–΄ λΉμΌλ΅ λ“±λ΅ν•΄μ•Όν•κ³ , μ¤μΌ€μ¤„μ„ λ“±λ΅ν•΄μ£Όλ” μ½”λ“λ¥Ό μ‘μ„±ν•κ³ , μλ™μΌλ΅ μ¤μΌ€μ¤„ λ“±λ΅ κΈ°λ¥μ΄ μ‹¤ν–‰λλ„λ΅ λ§λ“¤μ–΄μ•Ό ν•λ” λ“±μ λ²κ±°λ΅μ›€μ΄ μλ‹¤. μ¤ν”„λ§μ—μ„λ”Β `<task:sheduled-task>`Β νƒκ·Έλ¥Ό μ΄μ©ν•΄ μΌλ° λΉμ λ©”μ†λ“λ¥Ό νƒμ¤ν¬λ΅ ν™μ©ν•λ” μ¤μΌ€μ¤„μ„ λ“±λ΅ν•  μ μλ‹¤.
    - μ¤μΌ€μ¤„μ€Β `<task:scheduled>`Β νƒκ·Έλ¥Ό μ΄μ©ν•΄ λ“±λ΅ν•λ‹¤.
    - μΌλ° λΉμ„ νƒμ¤ν¬λ΅ μ‚¬μ©ν•λ” μ¤μΌ€μ¤„ μ„¤μ •
        
        ```java
        <task:scheduled-tasks scheduler="myScheduler">
            <task:scheduled ref="systemAdminService" method="checkSystem" fixed-rate="5000"/>
            <task:scheduled ref="resourceService" method="clearAll" cron="0 30 6 * * *"/>
        </task:scheduled-tasks>
        ```
        

### 6-4. μ• λ…Έν…μ΄μ…μ„ μ΄μ©ν• μ¤μΌ€μ¤„λ§κ³Ό λΉ„λ™κΈ° νƒμ¤ν¬ μ‹¤ν–‰

---

- `@Scheduled`
    - `@Scheduled`λ” XML μ„¤μ • λ€μ‹  νƒμ¤ν¬ μ—­ν• μ„ λ§΅μ„ λ©”μ†λ“μ— μ§μ ‘ μ¤μΌ€μ¤„ μ •λ³΄λ¥Ό μ• λ…Έν…μ΄μ…μ„ ν†µν•΄ λ¶€μ—¬ν•΄μ„ μ¤μΌ€μ¤„μ΄ μ μ©λκ² ν•΄μ¤€λ‹¤.
    - `@Scheduled`λ” μ„Έ κ°€μ§€ μΆ…λ¥μ νΈλ¦¬κ±° μ„¤μ •μ„ μ§€μ›ν•λ‹¤.
        1. `fixedDelay`
            - μ΄μ „ μ‘μ—…μ΄ λλ‚ μ‹μ λ¶€ν„° μΌμ • μ‹κ°„μ΄ μ§€λ‚ ν›„μ— λ™μ‘ν•λ„λ΅ μ„¤μ •ν•λ‹¤.
            - μ‹κ°„ λ‹¨μ„λ” λ°€λ¦¬μ΄.
            
            ```java
            @Scheduled(fixedDelay = 3600000) // 1000 * 60 * 60, 1μ‹κ°„λ§λ‹¤ μ‹¤ν–‰ν•λ‹¤.
            ```
            
        2. `fixedRate`
            - λ°€λ¦¬μ΄λ΅ μ„¤μ •λ μΌμ •ν• μ‹κ°„ κ°„κ²©μΌλ΅ λ©”μ†λ“κ°€ μ‹¤ν–‰λκ² ν•΄μ¤€λ‹¤.
            - `fixedDelay`μ™€ λ‹¤λ¥΄κ² μ΄μ „ λ©”μ†λ“κ°€ νΈμ¶λ μ‹μ μΌλ΅λ¶€ν„°μ μ‹κ°„μ΄λ‹¤.
                
                ![Untitled](./images/Untitled%202.png)
                
            
            ```java
            @Scheduled(fixedRate=5000) // 5μ΄λ§λ‹¤ κ³„μ† μν–‰λλ‹¤.
            ```
            
        3. `cron`
            - `cron` ν¬λ§·μ„ μ‚¬μ©ν•΄ μ¤μΌ€μ¤„μ„ μ§€μ •ν•  μ μλ‹¤. κ°€μ¥ μ μ—°ν•κ² μ¤μΌ€μ¤„μ„ μ§€μ •ν•  μ μλ” λ°©λ²•μ΄λ‹¤.
            
            ```java
            @Scheduled(cron = "0 30 23 * * *")
            ```
            
    
    π‘‰Β `@Scheduled`κ°€ λ¶€μ—¬λλ” λ©”μ†λ“λ” νλΌλ―Έν„°λ¥Ό κ°€μ§ μ μ—†μΌλ©° λ°λ“μ‹ voidν•μ λ¦¬ν„΄νƒ€μ…μ΄μ–΄μ•Ό ν•λ‹¤.
    
- `@Async`
    - `@Async`κ°€ λ¶€μ—¬λ λ©”μ†λ“λ” μλ™μΌλ΅ λΉ„λ™κΈ° λ°©μ‹μΌλ΅ μ‹¤ν–‰λλ‹¤.
    - `TaskExecutor`λ¥Ό μ½”λ“λ΅ μ‚¬μ©ν•μ§€ μ•κ³ λ„ λΉ„λ™κΈ° μ‹¤ν–‰μ΄ κ°€λ¥ν•κ² ν•΄μ¤€λ‹¤. λΉ„λ™κΈ°λ΅ λ™μ‘ν•κΈ° λ•λ¬Έμ— λ©”μ†λ“ λ‚΄μ μ‘μ—…μ΄ μ¤λ μ‹κ°„μ΄ κ±Έλ¦¬λ”λΌλ„ λ©”μ†λ“λ¥Ό νΈμ¶ν•λ©΄ λ°”λ΅ λ¦¬ν„΄λλ‹¤. λ©”μ†λ“λ” λ³„λ„μ μ¤λ λ“μ—μ„ λ™μ‘ν•κ² λλ‹¤.
    
    π‘‰Β λ¦¬ν„΄ νƒ€μ…μ€ `void` λλ” `Future` νƒ€μ…μ΄μ–΄μ•Ό ν•λ‹¤. λ©”μ†λ“λ” λ‹¤λ¥Έ μ½”λ“μ— μν•΄ μ§μ ‘ νΈμ¶λλ―€λ΅ νλΌλ―Έν„°λ” κ°€μ§ μ μλ‹¤.
    

## 7. μΊμ‹ μ¶”μƒν™”(μ¤ν”„λ§ 3.1)

- μ¤ν”„λ§ 3.1μ€ λΉμ λ©”μ†λ“μ— μΊμ‹ μ„λΉ„μ¤λ¥Ό μ μ©ν•  μ μλ” κΈ°λ¥μ„ μ κ³µν•λ‹¤. μΊμ‹ μ„λΉ„μ¤λ” νΈλμ­μ…κ³Ό λ§μ°¬κ°€μ§€λ΅ AOPλ¥Ό μ΄μ©ν•΄ λ©”μ†λ“ μ‹¤ν–‰ κ³Όμ •μ— ν¬λ…ν•κ² μ μ©λλ‹¤. λν• μΊμ‹ μ„λΉ„μ¤ κµ¬ν„ κΈ°μ μ— μΆ…μ†λμ§€ μ•λ„λ΅ μ¶”μƒν™” μ„λΉ„μ¤λ¥Ό μ κ³µν•κΈ° λ•λ¬Έμ— ν™κ²½μ΄ λ°”λ€κ±°λ‚ μ μ©ν•  κΈ°μ μ„ λ³€κ²½ν•΄μ„ μΊμ‹ μ„λΉ„μ¤μ μΆ…λ¥κ°€ λ‹¬λΌμ§€λ”λΌλ„ μ• ν”λ¦¬μΌ€μ΄μ… μ½”λ“μ— μν–¥μ„ μ£Όμ§€ μ•λ”λ‹¤.
    - μΊμ‹λ” κΈ°λ³Έμ μΌλ΅ μ„±λ¥μ ν–¥μƒμ„ μ„ν•΄ μ‚¬μ©ν•λ‹¤.Β μΊμ‹λ” μ„μ‹ μ €μ¥μ†λΌλ” λ»μ΄λ‹¤.
        - λ³µμ΅ν• κ³„μ‚°μ΄λ‚ DB μ‘μ—…, μ›κ²© μ”μ²­μ μ²λ¦¬ κ²°κ³Ό λ“±μ„ μ„μ‹ μ €μ¥μ†μΈ μΊμ‹μ— μ €μ¥ν•΄λ’€λ‹¤κ°€ λ™μΌν• μ”μ²­μ΄ λ“¤μ–΄μ¤λ©΄ λ³µμ΅ν• μ‘μ—…μ„ μν–‰ν•΄μ„ κ²°κ³Όλ¥Ό λ§λ“λ” λ€μ‹  μΊμ‹μ— λ³΄κ΄€ν•΄λ’€λ κΈ°μ΅΄ κ²°κ³Όλ¥Ό λ°”λ΅ λλ ¤μ£Όλ” λ°©μ‹μ΄λ‹¤.
    - μΊμ‹λ” λ°λ³µμ μΌλ΅ λ™μΌν• κ²°κ³Όκ°€ λμ•„μ¤λ” μ‘μ—…μ—λ§ μ΄μ©ν•  μ μλ‹¤.
    - μΊμ‹λ¥Ό μ‚¬μ©ν•  λ•λ” μΊμ‹μ— μ €μ¥ν•΄λ‘” λ‚΄μ©μ΄ λ°”λ€λ” μƒν™©μ„ μ νμ•…ν•΄μ•Ό ν•λ‹¤.(λ°μ΄ν„° λ¶μΌμΉ λ¬Έμ )

### 7-1. μ• λ…Έν…μ΄μ…μ„ μ΄μ©ν• μΊμ‹ μ†μ„± λ¶€μ—¬

---

- μ¤ν”„λ§μ μΊμ‹ μ„λΉ„μ¤ μ¶”μƒν™”λ” AOP λ¥Ό μ΄μ©ν•λ‹¤. μΊμ‹ κΈ°λ¥μ„ λ‹΄μ€ μ–΄λ“λ°”μ΄μ¤λ” μ¤ν”„λ§μ΄ μ κ³µν•λ‹¤.
- `@Cacheable`
    - μΊμ‹ μ„λΉ„μ¤λ” λ³΄ν†µ λ©”μ†λ“ λ‹¨μ„λ΅ μ§€μ •ν•λ‹¤.
        - μΊμ‹μ— μ €μ¥ν•  λ‚΄μ©κ³Ό μΊμ‹ μ†μ„± μ •λ³΄λ΅ λ©”μ†λ“μ λ¦¬ν„΄ κ°’κ³Ό λ©”μ†λ“ νλΌλ―Έν„°λ¥Ό μ‚¬μ©ν•κΈ° λ•λ¬Έμ΄λ‹¤.
    - `@Cacheable` μ• λ…Έν…μ΄μ…μ„ λ¶™μ—¬μ¤€λ‹¤. λ””ν΄νΈ μ—λ¦¬λ¨ΌνΈλ” μΊμ‹ μ΄λ¦„μ΄λ‹¤.
        - μΊμ‹μ— μ €μ¥λλ” μ •λ³΄λ¥Ό κµ¬λ¶„ν•κΈ° μ„ν•΄ μΊμ‹ μ΄λ¦„μ„ μ‚¬μ©ν•λ‹¤.
        
        ```java
        @Cacheable("product")
        public Product bestProduct(String productNo) {..}
        ```
        
        - μΊμ‹ μ΄λ¦„μ€ product
            - product λΌλ” μ΄λ¦„μ μΊμ‹μ— Product νƒ€μ…μ μ¤λΈμ νΈλ¥Ό μ €μ¥ν•λ” κ²ƒμ΄λ‹¤.
    - ν•λ‚μ μΊμ‹μ—λ” ν‚¤κ°€ λ‹¤λ¥Έ μ—¬λ¬ κ°μ μ¤λΈμ νΈλ¥Ό λ„£μ„ μ μλ‹¤.
        - μ„μ—μ„λ” νλΌλ―Έν„°μΈ productNo κ°€ product μΊμ‹μ ν‚¤κ°€ λλ‹¤.
            - μΊμ‹μ— μ¤λΈμ νΈκ°€ μ €μ¥λ  λ•λ” ν‚¤ μ •λ³΄λ„ ν•¨κ» μ €μ¥λλ‹¤.
            - 1.`bestProduct("A-001")`, 2.`bestProduct("A-001")` κ°™μ΄ νΈμ¶λλ‹¤κ³  ν•λ©΄,
                - 1μ΄ νΈμ¶λλ©΄ AOP μ— μν•΄ μΊμ‹ κΈ°λ¥μ„ λ‹΄λ‹Ήν•λ” μ–΄λ“λ°”μ΄μ¤κ°€ λ¨Όμ € μ‹¤ν–‰λλ‹¤. μ¤λΈμ νΈλ¥Ό μ°Ύμ§€ λ»ν–κΈ° λ•λ¬Έμ— μΊμ‹ μ–΄λ“λ°”μ΄μ¤λ” bestProduct() λ©”μ†λ“λ¥Ό μ‹¤ν–‰ν•λ‹¤. κ·Έλ¦¬κ³  λ©”μ†λ“ κ²°κ³Όκ°€ λ¦¬ν„΄λλ©΄ λ¦¬ν„΄ κ°’μΌλ΅ λμ•„μ¨ Product μ¤λΈμ νΈλ¥Ό `A-001` ν‚¤ κ°’μΌλ΅ μΊμ‹μ— μ €μ¥ν•λ‹¤.
                - 2κ°€ μ‹¤ν–‰λ  λ•λ” λ©”μ†λ“κ°€ μ‹¤ν–‰λμ§€ μ•κ³  μΊμ‹μ—μ„ λ°”λ΅ λ¦¬ν„΄ν•λ‹¤.
            - AOP λ” λ©”μ†λ“μ μ‹¤ν–‰ μ „κ³Ό ν›„μ— λ¶€κ°€μ μΈ μ‘μ—…μ„ μ¶”κ°€ν•κΈ°λ„ ν•μ§€λ§, μ•„μ λ©”μ†λ“μ μ‹¤ν–‰ μ—¬λ¶€λ¥Ό κ²°μ •ν•  μλ„ μλ‹¤.
                - μΊμ‹ κ°’μ΄ μ΅΄μ¬ν•λ‹¤λ©΄ λ©”μ†λ“ μ‹¤ν–‰μ„ μ•„μ μƒλµν•΄λ²„λ¦°λ‹¤.
        - λ©”μ†λ“μ νλΌλ―Έν„°κ°€ μ—†λ” κ²½μ°λ”
            - μΊμ‹ μ„λΉ„μ¤μ κΈ°λ³Έ ν‚¤ μƒμ„± κµ¬ν„ λ°©μ‹μ— μν•΄ 0μ΄λΌλ” ν‚¤λ¥Ό μ €μ¥ν•λ‹¤.
            - μ΅°κ±΄ μ—†μ΄ ν•­μƒ λ™μΌν• κ²°κ³Όλ¥Ό λ¦¬ν„΄ν•λ” λ©”μ†λ“λΌλ©΄ νλΌλ―Έν„° μ—†λ” λ©”μ†λ“λ΅ λ§λ“¤λ©΄ λλ‹¤.
        - λ©”μ†λ“ νλΌλ―Έν„° κ°’μ΄ μ—¬λ¬κ°μΈ κ²½μ°λ”
            - λ¨λ“  νλΌλ―Έν„°μ `hashCode()`κ°’μ„ μ΅°ν•©ν•΄μ„ ν‚¤λ΅ λ§λ“ λ‹¤.
            - ν•΄μ‹μ½”λ“ κ°’μ μ΅°ν•©μ΄ ν‚¤λ΅μ„ μλ―Έμλ” κ²½μ°λΌλ©΄ λ””ν΄νΈ ν‚¤ μƒμ„± λ°©μ‹μ„ κ·Έλ€λ΅ μ‚¬μ©ν•λ©΄ λμ§€λ§, κ·Έλ ‡μ§€ μ•λ‹¤λ©΄ `@Cacheable` μ• λ…Έν…μ΄μ…μ„ μ΄μ©ν•΄ ν‚¤ κ°’μΌλ΅ μ–΄λ–¤ κ²ƒμ„ μ‚¬μ©ν• μ§€ μ§€μ •ν•΄μ¤„ ν•„μ”κ°€ μλ‹¤.
            
            ```java
            **@Cacheable(value="product", key="#productNo")**
            Product bestProduct(**String productNo**, User user, Date datetime) {...}
            ```
            
            - key μ—λ¦¬λ¨ΌνΈλ” SpELμ„ μ΄μ©ν•΄ ν‚¤ κ°’μ„ μ§€μ •ν•λ‹¤.
            - νλΌλ―Έν„°μ νΉμ • ν”„λ΅νΌν‹° κ°’μ„ μ‚¬μ©ν•΄μ•Ό ν•λ‹¤λ©΄,
                
                ```java
                **@Cacheable(value="product", key="#condition.productNo")**
                Product bestProduct(**SearchCondition condition**) {...}
                ```
                
        - νλΌλ―Έν„° κ°’μ΄ νΉμ • μ΅°κ±΄μ„ λ§μ΅±μ‹ν‚¤λ” κ²½μ°μ—λ§ μΊμ‹λ¥Ό μ μ©ν•κ³ , κ·Έ μ™Έμ κ²½μ°μ—λ” μΊμ‹ μ„λΉ„μ¤λ¥Ό μ μ©ν•μ§€ μ•μ•„μ•Ό ν•λ‹¤λ©΄ `condition` μ—λ¦¬λ¨ΌνΈλ¥Ό μ΄μ©ν•λ©΄ λλ‹¤.
            
            ```java
            @Cacheable(value="user", condition="#user.type=='ADMIN'")
            Product bestProduct(User user) {...}
            ```
            
- `@CacheEvict`μ™€ `@CachePut`
    - μΊμ‹λ” μΊμ‹μ μ κ±°μ—λ„ μΊμ‹ μ„λΉ„μ¤ AOP κΈ°λ¥μ΄ μ μ©λ λ©”μ†λ“λ¥Ό μ΄μ©ν•λ‹¤.
    - `@CacheEvict`: μΊμ‹ μ΄λ¦„μ„ λ„£μ–΄μ£Όλ©΄ λ©”μ†λ“κ°€ μ‹¤ν–‰λ  λ• ν•΄λ‹Ή μΊμ‹μ λ‚΄μ©μ΄ μ κ±°λλ‹¤.
        
        ```java
        **@CacheEvict(value="bestProduct")**
        public void refreshBestProducts() {...}
        ```
        
        - `@CacheEvict`λ” κΈ°λ³Έμ μΌλ΅ λ©”μ†λ“μ ν‚¤ κ°’μ— ν•΄λ‹Ήν•λ” μΊμ‹λ§ μ κ±°ν•λ‹¤.
            
            ```java
            **@CacheEvict(value="product", key="#product.productNo")**
            public void updateProducts(Product product) {...}
            ```
            
        - μΊμ‹μ— μ €μ¥λ κ°’μ„ λ¨λ‘ μ κ±°ν•  ν•„μ”κ°€ μλ‹¤λ©΄ `allEntries` μ—λ¦¬λ¨ΌνΈλ¥Ό `true`λ΅ μ§€μ •ν•΄μ£Όλ©΄ λλ‹¤.
            
            ```java
            @CacheEvict(value="product", **allEntries=true**)
            ```
            
    - `@CachePut`: λ“λ¬Όμ§€λ§ λ©”μ†λ“λ¥Ό μΊμ‹μ— κ°’μ„ μ €μ¥ν•λ” μ©λ„λ΅λ§ μ‚¬μ©
        - λ©”μ†λ“ μ‹¤ν–‰ κ²°κ³Όλ¥Ό μΊμ‹μ— μ €μ¥ν•μ§€λ§, μ €μ¥λ μΊμ‹μ λ‚΄μ©μ„ μ‚¬μ©ν•μ§€λ” μ•κ³  ν•­μƒ λ©”μ†λ“λ¥Ό μ‹¤ν–‰ν•λ‹¤.
        - ν• λ²μ— μΊμ‹μ— λ§μ€ μ •λ³΄λ¥Ό μ €μ¥ν•΄λ‘λ” μ‘μ—…μ΄λ‚, λ‹¤λ¥Έ μ‚¬μ©μκ°€ μ°Έκ³ ν•  μ •λ³΄λ¥Ό μƒμ„±ν•λ” μ©λ„λ΅λ§ μ‚¬μ©λλ” λ©”μ†λ“μ— μ΄μ©ν•  μ μλ‹¤.
- μ• λ…Έν…μ΄μ…μ„ μ΄μ©ν• μΊμ‹ κΈ°λ¥ μ„¤μ •
    - XML μ„¤μ •
        - `<cache:annotation-driven />`
    - `@Configuration` ν΄λμ¤λ¥Ό μ‚¬μ©
        - `@EnableCaching` μ• λ…Έν…μ΄μ…μ„ μ¶”κ°€ν•΄μ£ΌκΈ°λ§ ν•λ©΄ λλ‹¤.
            
            ```java
            @Configuration
            **@EnableCaching**
            public Class AppConfig {
            ```
            
    - μΊμ‹ μ„λΉ„μ¤λ” AOP λ¥Ό μ΄μ©ν•λ―€λ΅ `mode`, `proxyTargetClass` μ—λ¦¬λ¨ΌνΈλ¥Ό μ‚¬μ©ν•΄ ν”„λ΅μ‹ λ¨λ“μ™€ ν΄λμ¤ ν”„λ΅μ‹ μ μ© μ—¬λ¶€λ¥Ό μ§€μ •ν•  μ μλ‹¤.

### 7-2. μΊμ‹ λ§¤λ‹μ €

---

- μ¤ν”„λ§μ μΊμ‹ μ„λΉ„μ¤λ” AOP λ¥Ό μ΄μ©ν•΄ μ• ν”λ¦¬μΌ€μ΄μ… μ½”λ“λ¥Ό μμ •ν•μ§€ μ•κ³ λ„ μΊμ‹ λ¶€κ°€κΈ°λ¥μ„ λ©”μ†λ“μ— μ μ©ν•  μ μκ² ν•΄μ¤€λ‹¤. λ™μ‹μ— μΊμ‹ κΈ°μ μ μΆ…λ¥μ™€ μƒκ΄€μ—†μ΄ μ¶”μƒν™”λ μ¤ν”„λ§ μΊμ‹ API λ¥Ό μ΄μ©ν•  μ μκ² ν•΄μ£Όλ” μ„λΉ„μ¤ μ¶”μƒν™”λ¥Ό μ κ³µν•λ‹¤.
- μΊμ‹ μ¶”μƒν™”μ—μ„λ” μ μ©ν•  μΊμ‹ κΈ°μ μ„ μ§€μ›ν•λ” μΊμ‹ λ§¤λ‹μ €λ¥Ό λΉμΌλ΅ λ“±λ΅ν•΄μ¤μ•Ό ν•λ‹¤.
- μΊμ‹ μ¶”μƒν™” API μΈ μΊμ‹ λ§¤λ‹μ €λ” `org.springframework.cache` ν¨ν‚¤μ§€μ `CacheManager` μΈν„°νμ΄μ¤λ¥Ό κµ¬ν„ν•΄μ„ λ§λ“ λ‹¤. μ¤ν”„λ§ 3.1μ€ κΈ°λ³Έμ μΌλ΅ 5κ°€μ§€ `CacheManager` κµ¬ν„ ν΄λμ¤λ¥Ό μ κ³µν•λ‹¤.
    - `ConcurrentMapCacheManager`
        - `ConcurrentMapCache` ν΄λμ¤λ¥Ό μΊμ‹λ΅ μ‚¬μ©ν•λ” μΊμ‹ λ§¤λ‹μ €
            - μλ°”μ `ConcurrentMap`μ„ μ΄μ©ν•΄ μΊμ‹ κΈ°λ¥μ„ κµ¬ν„ν• κ°„λ‹¨ν• μΊμ‹.
        - μΊμ‹ μ •λ³΄λ¥Ό Map νƒ€μ…μΌλ΅ λ©”λ¨λ¦¬μ— μ €μ¥ν•΄λ‘κΈ° λ•λ¬Έμ— μ†λ„κ°€ λ§¤μ° λΉ λ¥΄κ³  λ³„λ‹¤λ¥Έ μ„¤μ •μ΄ ν•„μ” μ—†μ§€λ§, λ³Έκ²©μ μΈ μΊμ‹λ΅ μ‚¬μ©ν•κΈ°μ—λ” κΈ°λ¥μ΄ λΉμ•½ν•λ‹¤.
    - `SimpleCacheManager`
        - κΈ°λ³Έμ μΌλ΅ μ κ³µν•λ” μΊμ‹κ°€ μ—†λ‹¤.
        - ν”„λ΅νΌν‹°λ¥Ό μ΄μ©ν•΄μ„ μ‚¬μ©ν•  μΊμ‹λ¥Ό μ§μ ‘ λ“±λ΅ν•΄μ¤μ•Ό ν•λ‹¤.
    - `EhCacheCacheManager`
        - μλ°”μ—μ„ κ°€μ¥ μΈκΈ°μλ” μΊμ‹ ν”„λ μ„μ›ν¬, `EhCache`λ¥Ό μ§€μ›ν•λ‹¤.
        - `EhCacheCacheManager`λ¥Ό λΉμΌλ΅ λ“±λ΅ν•λ©΄ λλ‹¤.
            - `EhCache`μ μΊμ‹ λ§¤λ‹μ €λ¥Ό ν”„λ΅νΌν‹°λ΅ λ“±λ΅ν•΄μ¤μ•Ό ν•λ‹¤. `net.sf.ehcache.CacheManager`λ¥Ό λ“±λ΅ν•΄μ¤μ•Ό ν•λ‹¤. μ¤ν”„λ§μ μΊμ‹ λ§¤λ‹μ €μ™€ μ΄λ¦„μ΄ κ°™μ•„μ„ νΌλ™μ— μ£Όμν•΄μ•Ό ν•λ‹¤.
                - `EhCache` λ‚΄λ¶€μ—μ„ μΊμ‹λ¥Ό κ΄€λ¦¬ν•λ” λ° μ‚¬μ©λλ” νΉμ • μΊμ‹ κΈ°μ μ API λ‹¤.
            - μ§€μ •ν•  λ• μ¤ν”„λ§μ΄ μ κ³µν•λ” `EhCacheManagerFactoryBean`μ„ μ΄μ©ν•λ” κ²ƒμ΄ νΈλ¦¬ν•λ‹¤.
        - μλ°” μ½”λ“λ¥Ό μ΄μ©ν• `EhCache` μΊμ‹ λ§¤λ‹μ € μ„¤μ •
            
            ```java
            @Configuration
            @EnableCaching
            public class CacheConfig implements CommandLineRunner {
                private static final Logger log = LoggerFactory.getLogger(CacheConfig.class);
                @Autowired
                private CacheManager cacheManager;
            
                @Bean
                public CacheManager cacheManager() {
                    return new EhCacheCacheManager(ehCacheCacheManager().getObject());
                }
            
                @Bean
                public EhCacheManagerFactoryBean ehCacheCacheManager() {
                    EhCacheManagerFactoryBean cmfb = new EhCacheManagerFactoryBean();
                    cmfb.setConfigLocation(new ClassPathResource("ehcache.xml"));
                    cmfb.setShared(true);
                    return cmfb;
                }
            
                @Override
                public void run(String... args) throws Exception {
                    log.info("=========================================================\n"
                            + "Using cache manager: " + this.cacheManager.getClass().getName() + "\n"
                            + "=========================================================\n\n");
                }
            }
            ```
            
    - `CompositeCacheManager`, `NoOpCacheManager`
        - `CompositeCacheManager`λ” ν•λ‚ μ΄μƒμ μΊμ‹ λ§¤λ‹μ €λ¥Ό μ‚¬μ©ν•λ„λ΅ μ§€μ›ν•΄μ£Όλ” νΌν•© μΊμ‹ λ§¤λ‹μ €
        - `CompositeCacheManager`μ `cacheManagers` ν”„λ΅νΌν‹°μ— μ μ©ν•  μΊμ‹ λ§¤λ‹μ € λΉμ„ λ¨λ‘ λ“±λ΅ν•΄μ£Όλ©΄ λλ‹¤.
        - `addNoOpCache` ν”„λ΅νΌν‹°λ¥Ό `true`λ΅ ν•΄μ£Όλ©΄ μ•„λ¬΄λ° κΈ°λ¥μ„ κ°–μ§€ μ•μ€ `NoOpCache`λ¥Ό μ¶”κ°€ν•΄μ£ΌκΈ°λ„ ν•λ‹¤.
            - μΊμ‹κ°€ μ§€μ›λμ§€ μ•λ” ν™κ²½μ—μ„ λ™μ‘ν•  λ• μΊμ‹ κ΄€λ ¨ μ„¤μ •μ„ μ κ±°ν•μ§€ μ•μ•„λ„ μ—λ¬κ°€ λ‚μ§€ μ•κ² ν•΄μ£Όλ” κΈ°λ¥


## 8. `@Enable` μ• λ…Έν…μ΄μ…μ„ μ΄μ©ν• λΉ μ„¤μ •μ •λ³΄ λ¨λ“ν™”

- λ¨λ“ν™”μ κ°€μ¥ ν° μ΄μ λ” ν¨κ³Όμ μΈ μ¬μ‚¬μ©μ΄λ‹¤.
    - λΉ μ„¤μ •μ •λ³΄λ¥Ό λ¨λ“ν™”ν•λ” μ΄μ λ” λ°λ³µμ μΌλ΅ μ‚¬μ©λλ” λ³µμ΅ν• λΉ μ„¤μ •μ„ λ…λ¦½μ‹μΌμ„ νΈλ¦¬ν•κ² μ¬μ‚¬μ©ν•  ν•„μ”κ°€ μκΈ° λ•λ¬Έμ΄λ‹¤.
- λ¨λ“ν™”λ¥Ό ν•  λ• μ¤‘μ”ν• κ²ƒμ€ λ¨λ“μ΄ μ‹μ¤ν…μ λ‹¤λ¥Έ λ¶€λ¶„κ³Ό μ μ ν λ¶„λ¦¬λμ–΄ μλ” κ²ƒμ΄λ‹¤.
    - λ¨λ“μ„ μ¶”κ°€ν•κ³  λ‚μ„ λ¨λ“ μ™Έλ¶€μ λ³€ν™”κ°€ μƒκ²Όλ‹¤κ³  λ¨λ“ λ‚΄λ¶€ μ½”λ“λ¥Ό μμ •ν•΄μ•Ό ν•λ‹¤κ±°λ‚, λ°λ€λ΅ λ¨λ“ λ‚΄λ¶€ κµ¬ν„μ΄ μμ •λλ‹¤κ³  λ¨λ“μ„ μ‚¬μ©ν•λ” μ™Έλ¶€ μ½”λ“λ„ κ°™μ΄ μμ •ν•΄μ•Ό ν•λ‹¤λ©΄ λ¨λ“ν™”κ°€ μ λ κ²ƒμ΄ μ•„λ‹λ‹¤.
- λ¨λ“μ€ μκΈ° μ±…μ„μ„ λ…ν™•ν κ°–κ³  μκ³ , κ°„κ²°ν• μΈν„°νμ΄μ¤λ¥Ό ν†µν•΄μ„λ§ μ—°κ²°λΌμ•Ό ν•λ‹¤.

- μ¤ν”„λ§μ XML μ „μ© νƒκ·Έλ” μ΄λ° λ¨λ“ν™” μ΅°κ±΄μ„ μ μ¶©μ΅±ν•λ‹¤.
    - ν•μ§€λ§ XML μ „μ© νƒκ·Έλ¥Ό λ§λ“λ” λ°λ” μ†μ‰½κ² μ ‘κ·Όν•κΈ°λ„ νλ“¤κ³  μƒλ‹Ήν• μ‹κ°„μ„ λ“¤μ—¬μ•Ό ν•λ‹¤.
- μλ°” μ½”λ“λ¥Ό μ΄μ©ν• λΉ μ„¤μ • λ°©μ‹μ€ μ¬μ‚¬μ© κ°€λ¥ν• μ„¤μ •μ •λ³΄ λ¨λ“λ΅ λ§λ“¤κΈ°κ°€ ν›¨μ”¬ μ‰½λ‹¤.
    - μ¤ν”„λ§ 3.1μ€ μλ°” μ½”λ“ μ„¤μ •μ„ λ¨λ“ν™”ν•λ” λ° ν•„μ”ν• λ‹¤μ–‘ν• κΈ°λ²•μ„ μ κ³µν•κ³ , μ¤ν”„λ§ μ¤μ¤λ΅λ„ `@Enable`λ΅ μ‹μ‘ν•λ” λ‹¤μ–‘ν• μ„¤μ •μ© μ• λ…Έν…μ΄μ…μ„ λ§λ“¤μ–΄μ„ μ κ³µν•κ³  μλ‹¤.
    - `@Enable` μ„¤μ • μ• λ…Έν…μ΄μ…κ³Ό μλ°” μ½”λ“λ¥Ό μ΄μ©ν• μ„¤μ • λ°©λ²•μ„ μ΄μ©ν•λ©΄ XML μ „μ© νƒκ·Έλ³΄λ‹¤ ν›¨μ”¬ κ°„λ‹¨ν• λ°©λ²•μΌλ΅ μ„¤μ •μ •λ³΄ μ¬μ‚¬μ© λ¨λ“μ„ λ§λ“¤μ–΄λ‚Ό μκ°€ μλ‹¤.

### 8-1. `@Import`, `@Configuration` μƒμ†

---

- `@Import`λ¥Ό μ΄μ©ν• λ‹¨μ μ¬μ‚¬μ©
    - `@Configuration` ν΄λμ¤λ΅ λ§λ“  μ„¤μ •μ •λ³΄λ¥Ό μ¶”κ°€ν•  λ•λ” `@Import`λ¥Ό μ΄μ©ν•λ©΄ λλ‹¤.
    - μ¬μ‚¬μ©ν•κ³  μ‹¶μ€ λΉ μ„¤μ •μ„ `@Configuration` ν΄λμ¤λ΅ λ―Έλ¦¬ λ§λ“¤μ–΄λ‘κ³  μ΄λ¥Ό `@Import`λ΅ κ°€μ Έμ¤λ” λ°©μ‹μ΄λ‹¤.
        
        ```java
        @Configuration
        **@Import(HelloConfig.class)**
        public class AppConfig {..}
        ```
        
    - μ¤ν”„λ§μ `@Enable`λ΅ μ‹μ‘ν•λ” λ€λ¶€λ¶„μ μ• λ…Έν…μ΄μ…μ€ μ• νΈλ¦¬λ·°νΈλ‚ μ—λ¦¬λ¨ΌνΈλ¥Ό μ΄μ©ν•΄ μ„¤μ • μµμ…μ„ μ§€μ •ν•  μ μλ‹¤.
    - κ·Έλ°λ° @Importλ¥Ό ν†µν•΄ `@Configuration` ν΄λμ¤λ¥Ό κ·Έλ€λ΅ κ°€μ Έμ™€ μ¶”κ°€ν•λ” μ‹μ΄λΌλ©΄ μ„¤μ •μ •λ³΄λ¥Ό λ°”κΏ€ μκ°€ μ—†λ‹¤.
- `@Configuration` ν΄λμ¤ μƒμ†κ³Ό μ¤λ²„λΌμ΄λ”©μ„ μ΄μ©ν• ν™•μ¥ λ°©λ²•
    - `@Configuration` ν΄λμ¤μ λΉ μ •λ³΄λ” `@Bean` λ©”μ†λ“μ— λ‹΄κ²¨ μλ‹¤. λ”°λΌμ„ `@Bean` λ©”μ†λ“λ¥Ό μƒμ†λ°›μΌλ©΄ μνΌν΄λμ¤μ λΉ μ„¤μ •μ •λ³΄λ„ ν•¨κ» μƒμ†λ°›κ² λλ‹¤.
        
        ```java
        @Configuration
        ****public class AppConfig extends HelloConfig {
            **@Override
            Hello hello() {
                Hello hello = super.hello();
                hello.setName("Jenny");
                return hello;
            }**
        }
        ```
        
    - μƒμ†μ„ μ΄μ©ν•΄ μ„¤μ •μ •λ³΄λ¥Ό κ°€μ Έμ™”μ„ λ•μ μ¥μ μ€ λ©”μ†λ“ μ¤λ²„λΌμ΄λ”©μ„ μ΄μ©ν•΄ μνΌ ν΄λμ¤μ `@Bean` λ©”μ†λ“λ¥Ό μ¬μ •μ ν•  μ μλ‹¤λ” κ²ƒμ΄λ‹¤.
    - ν•μ§€λ§ μƒμ†μ€ ν• κ°μ ν΄λμ¤λ§ μƒμ†ν•  μ μλ‹¤λ” λ‹¨μ μ΄ μλ‹¤. μ£Όμν•  μ λ„ λ§λ‹¤.

### 8-2. `@Enable` μ „μ© μ• λ…Έν…μ΄μ…κ³Ό ImportAware

---

- `@Enable`λ΅ μ‹μ‘ν•λ” μ• λ…Έν…μ΄μ…μ€ λ¨λ“ν™”λ λΉ μ„¤μ •μ •λ³΄λ¥Ό μ¶”κ°€ν•λ©΄μ„ μ—λ¦¬λ¨ΌνΈ κ°’μ„ μ΄μ©ν•΄ μµμ… μ •λ³΄λ¥Ό μ κ³µν•  μ μκ² ν•΄μ¤€λ‹¤.
- `@Enable` μ• λ…Έν…μ΄μ… μ μ©
    - `@Enable`λ΅ μ‹μ‘ν•λ” μ• λ…Έν…μ΄μ…μ€ λ€λ¶€λ¶„ `@Import`λ¥Ό λ©”νƒ€ μ• λ…Έν…μ΄μ…μΌλ΅ κ°–κ³  μλ‹¤.
    - `@Enable` μ• λ…Έν…μ΄μ…λ„ κΈ°λ³Έ κΈ°λ¥μ€ `@Import`μ™€ λ™μΌν•κ² λ‹¤λ¥Έ `@Configuration` ν΄λμ¤μ μ„¤μ •μ •λ³΄λ¥Ό κ°€μ Έμ¤λ” κ²ƒμ΄λ‹¤. λ‹¤λ§, `@Import`λ¥Ό μ§μ ‘ λ…Έμ¶ν•λ” λ€μ‹  `@Import`λ¥Ό λ©”νƒ€ μ• λ…Έν…μ΄μ…μΌλ΅ μ‘μ„±ν• μ• λ…Έν…μ΄μ…μ„ μ‚¬μ©ν•κ² ν•΄μ¤€λ‹¤.
        
        ```java
        @Target(ElementType.TYPE)
        @Retention(RetentionPolicy.RUNTIME)
        @Import(HelloConfig.class)
        public @interface EnableHello {...}
        
        @Configuration
        **@EnableHello**
        public class AppConfig {...}
        ```
        
    - μ• λ…Έν…μ΄μ…μ„ μ •μν•  λ•λ” `@Target`κ³Ό `@Retention`μ„ λ…μ‹μ μΌλ΅ λ„£μ–΄μ£Όλ©΄ μΆ‹λ‹¤.
- `ImportAware` μΈν„°νμ΄μ¤λ¥Ό μ΄μ©ν• μµμ… μ§€μ •
    - `@Configuration` ν΄λμ¤κ°€ μμ‹ μ„ `@Import`ν•λ” μ• λ…Έν…μ΄μ…μ μ—λ¦¬λ¨ΌνΈ κ°’μ„ μ°Έμ΅°ν•λ ¤λ©΄ μ• λ…Έν…μ΄μ… μ •λ³΄λ¥Ό μ κ³µλ°›κΈ° μ„ν•΄ `ImportAware` μΈν„°νμ΄μ¤λ¥Ό κµ¬ν„ν•΄μ•Ό ν•λ‹¤.
        
        ```java
        @Configuration
        public class HelloConfig **implements ImportAware** {
            @Bean
            Hello hello() {
                Hello h = new Hello();
                h.setName("Spring");
                return h;
            }
        
            @Override
            public void setImportMetadata(AnnotationMetadata importMetadata) {
                Map<String, Object> elements = importMetadata.getAnnotationAttributes(EnableHello.class.getName());
                String name = (String) elements.get("name");
                hello().setName(name);
            }
        }
        ```
        
        - `setImportMetadata()`λ” `AnnotationMetadata` νƒ€μ…μ νλΌλ―Έν„°μ— `@Enable` μ• λ…Έν…μ΄μ… λ©”νƒ€μ •λ³΄λ¥Ό λ‹΄μ•„μ„ μ „λ‹¬ν•λ‹¤.
    - μ΄ λ°©λ²•μ„ μ΄μ©ν•λ©΄ `@EnableHello`λ¥Ό μ΄μ©ν•΄ HelloConfig μ— λ‹΄κΈ΄ λΉ μ„¤μ •μ •λ³΄λ¥Ό κ°€μ Έμ¤λ©΄μ„ ν•„μ”ν• μ„¤μ • ν•­λ©μ„ μμ λ΅­κ² λ³€κ²½ν•  μ μλ‹¤. ν•„μ”ν• μ¶”κ°€ μ„¤μ •μ •λ³΄κ°€ μλ‹¤λ©΄ `@EnableHello` μ• λ…Έν…μ΄μ…μ— μ—λ¦¬λ¨ΌνΈλ΅ μ¶”κ°€ν•΄μ„ μ‚¬μ©ν•λ©΄ λλ‹¤.

### 8-3. λΉ μ„¤μ •μ

---

- μ¬μ‚¬μ©ν•λ ¤λ” λΉ μ„¤μ •μ •λ³΄μ μ–‘μ΄ λ§κ±°λ‚ ν™•μ¥ λ°©λ²•μ΄ λ‹¤μ–‘ν•κ³  λ³µμ΅ν•  κ²½μ°μ—λ” μ• λ…Έν…μ΄μ…μ μ—λ¦¬λ¨ΌνΈλ§μΌλ΅λ” μ¶©λ¶„ν•μ§€ μ•μ„ μ μλ‹¤.
    - μ• λ…Έν…μ΄μ…μ μ—λ¦¬λ¨ΌνΈμ—λ” κ³ μ •λ κ°’λ§ λ„£μ„ μ μλ”λ°, λ•λ΅λ” μ½”λ“λ¥Ό μ΄μ©ν•΄ λ³µμ΅ν• μ„¤μ •μ„ μ¶”κ°€ν•΄μ•Ό ν•  ν•„μ”κ°€ μλ‹¤.
- μ΄λ΄ λ•λ” `@Enable` μ• λ…Έν…μ΄μ…κ³Ό ν•¨κ» μλ°” μ½”λ“λ¥Ό μ΄μ©ν• μ„¤μ •μ •λ³΄μ ν™•μ¥ ν¬μΈνΈκ°€ ν•„μ”ν•λ° μ΄λ¥Ό λΉ μ„¤μ •μλΌκ³  ν•λ‹¤.
- λΉ μ„¤μ •μλ” μΈν„°νμ΄μ¤λ΅ μ •μλλ‹¤.
    - λ³΄ν†µ `@Configuration` ν΄λμ¤κ°€ λΉ μ„¤μ •μλ¥Ό κµ¬ν„ν•΄μ„ μ‚¬μ©ν•λ‹¤.
    - λΉ μ„¤μ •μλ” `@Configuration` ν΄λμ¤ μƒμ†κ³Ό μ¤λ²„λΌμ΄λ”©μ„ ν†µν• ν™•μ¥ λ°©λ²•μ²λΌ μλ°” μ½”λ“λ¥Ό μ΄μ©ν•΄ λΉ μ„¤μ • μ½”λ“λ¥Ό μ¶”κ°€ν•  μ μλ‹¤λ” μ¥μ μ΄ μλ‹¤.
    - λ°λ©΄μ— μƒμ†κ³Ό λ‹¬λ¦¬ μ—¬λ¬ κ°μ λΉ μ„¤μ •μλ¥Ό λ™μ‹μ— κµ¬ν„ν•΄μ„ μ μ©ν•  μ μκ³ , `@Bean` λ©”μ†λ“λ¥Ό μ§μ ‘ λ…Έμ¶ν•μ§€ μ•κΈ° λ•λ¬Έμ— μ¤λ²„λΌμ΄λ”©μ„ μλ» μ‚¬μ©ν•΄μ„ μ„¤μ •μ •λ³΄λ¥Ό μ—‰λ§μΌλ΅ λ§λ“¤ μ„ν—μ€ μ—†λ‹¤.
    
    π‘‰Β λ”°λΌμ„ μλ°” μ½”λ“λ¥Ό μ΄μ©ν• λΉ μ„¤μ •μ •λ³΄ ν™•μ¥μ΄ ν•„μ”ν• κ²½μ° `@Configuration` μƒμ†λ³΄λ‹¤λ” `@Enable` μ• λ…Έν…μ΄μ…κ³Ό λΉ μ„¤μ •μλ¥Ό ν™μ©ν•λ” λ°©λ²•μ΄ λ‚«λ‹¤.
    
    - HelloConfigurer λΉ μ„¤μ •μ
        
        ```java
        public interface HelloConfigurer {
            void configName(Hello hello);
        }
        ```
        
    - HelloConfigurer λ¥Ό μ΄μ©ν• λΉ μ„¤μ •
        
        ```java
        @Configuration
        public class HelloConfig {
            **@Autowired HelloConfigurer helloConfigurer;**
        
            @Bean
            Hello hello() {
                Hello h = new Hello();
                h.setName("Spring"); // λ””ν΄νΈ κ°’
                **helloConfigurer.configName(h);** // μ¶”κ°€ μ„¤μ •
                return h;
            }
        }
        ```
        
        - λΉ μ„¤μ •μλ¥Ό ν•„μ”μ— λ”°λΌ μ„ νƒμ μΌλ΅ μ‚¬μ©ν•λ„λ΅ λ§λ“¤λ ¤λ©΄ `@Autowired`μ `required` μ†μ„±μ„ `false`λ΅ μ§€μ •ν•λ©΄ λλ‹¤.

### 8-4. `ImportSelector` μ™€ `ImportBeanDefinitionRegistrar`

---

- μµμ…μ— λ”°λΌ λΉμ μΆ…λ¥λ‚ κµ¬μ„±μ΄ μ•„μ λ°”λ€μ–΄μ•Ό ν•λ‹¤λ©΄ `@Import` κΈ°λ°μ λ°©λ²•μΌλ΅λ” μ¶©λ¶„ν•μ§€ μ•λ‹¤.
    - `@Bean` λ©”μ†λ“μ λΉ νƒ€μ…μ„ λ°”κΎΈκ±°λ‚ λΉμ κµ¬μ„±μ„ ν†µμ§Έλ΅ λ³€κ²½ν•λ” κ²ƒμ€ λ¶κ°€λ¥ν•λ‹¤.
    - μλ°” μ½”λ“λ¥Ό μ΄μ©ν•΄λ„ μ΄λ―Έ μ΅΄μ¬ν•λ” ν΄λμ¤μ— λ©”μ†λ“λ¥Ό λ„£κ³  λΉΌκ±°λ‚ λ¦¬ν„΄ νƒ€μ…μ„ λ°”κΏ€ μλ” μ—†κΈ° λ•λ¬Έ.
- `@Enable` μ• λ…Έν…μ΄μ…μ€ `@Import`λ¥Ό κΈ°λ°μΌλ΅ ν•κ³  μκ³ , `@Import`λ” κ°€μ Έμ™€ μ‚¬μ©ν•  `@Configuration` ν΄λμ¤λ¥Ό μ§μ ‘ μ§€μ •ν•κ³  μκΈ° λ•λ¬Έμ— `@Configuration` ν΄λμ¤μ μΆ…λ¥κ°€ κ³ μ •λΌμ•Ό ν•  ν…μ§€λ§, `@Enable` μ• λ…Έν…μ΄μ…μ„ μ΄μ©ν•΄μ„ μµμ…μ— λ”°λΌ λ‹¤λ¥Έ `@Configuration` ν΄λμ¤λ¥Ό μ‚¬μ©ν•  μ μλ” μ΄μ λ” μ¤ν”„λ§μ΄ `ImportSelector`λ¥Ό μ κ³µν•κΈ° λ•λ¬Έμ΄λ‹¤.

- `ImportSelector`λ” μ• λ…Έν…μ΄μ… λ©”νƒ€μ •λ³΄λ¥Ό μ κ³µλ°›μ•„μ„ μ¤νΈλ§ λ°°μ—΄μ„ λ¦¬ν„΄ν•λ” `selectImport()` λ©”μ†λ“λ¥Ό κ°–κ³  μλ‹¤.
    
    ```java
    public interface ImportSelector {
        String[] selectImports(AnnotationMetadata importingClassMetadata);
    }
    ```
    
- `ImportSelector`: `@Eable` μ• λ…Έν…μ΄μ…μ λ©”νƒ€μ •λ³΄λ¥Ό μ΄μ©ν•΄ `@Import`μ— μ μ©ν•  `@Configuration` ν΄λμ¤λ¥Ό κ²°μ •ν•΄μ£Όλ” μ¤λΈμ νΈ
    
    ```java
    public class HelloSelector implements ImportSelector {
        @Override
        public String[] selectImports(AnnotationMetadata importingClassMetadata) {
            String type = (String)importingClassMetadata.getAnnotationAttributes(EnableHello.class.getName()).get("mode");
            if("mode1".equals(mode)) {
                return new String[]{HelloConfig1.class.getName()};
            } 
            if("mode2".equals(mode)) {
                return new String[]{HelloConfig2.class.getName()}; 
            }
            throw new IllegalArgumentException();
        }
    }
    ```
    
- λΉ μ„¤μ •μ •λ³΄λ¥Ό `@Configuration` λ‹¨μ„λ΅ λ§λ“¤μ–΄λ‘κ³  μ„ νƒν•λ” μμ¤€μ„ λ„μ–΄μ„ μµμ…μ— λ”°λΌ λ³µμ΅ν• λΉ μ„¤μ • μ΅°ν•©μ„ λ§λ“¤μ–΄λ‚΄μ•Ό ν•λ” κ²½μ°λΌλ©΄ `ImportBeanDefinitionRegistrar`λ¥Ό μ΄μ©ν•  μ μλ‹¤. `ImportBeanDefinitionRegistrar`λ” XML μ „μ© νƒκ·Έλ¥Ό λ§λ“λ” λ°©λ²•κ³Ό λΉ„μ·ν•κ² λΉ λ©”νƒ€μ •λ³΄λ¥Ό μƒμ„±ν•λ” μ½”λ“λ¥Ό μ§μ ‘ μ‘μ„±ν•΄μ•Ό ν•λ‹¤.

- μ°Έκ³ 
    - [https://jeong-pro.tistory.com/186](https://jeong-pro.tistory.com/186)
    - [https://tram-devlog.tistory.com/entry/Spring-EhCache-μ μ©ν•κΈ°](https://tram-devlog.tistory.com/entry/Spring-EhCache-%EC%A0%81%EC%9A%A9%ED%95%98%EA%B8%B0)
